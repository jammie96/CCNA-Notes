### Role of a Router #Routers 
- Routers belong to a series but within the series, different models can be found characterized by different hardware profiles
- Cisco routers can be categorized in:
	- Branch Routers
	- Service Provider Routers
	- Virtual Routers
	- Small Business Routers

#### Branch Routers
- All branch routers are designed to offer a wide range of network and security services and also be usable in the software-defined WAN environment
- Branch Router generally use the IOS XE operating system
- E.g. of branch routers: Cisco Catalyst 8000 Series, Cisco 1000 Series Integrated Services Routers and Cisco 4000 Series Integrated Services Routers
- Cisco Catalyst 8000 Series Edge Platforms with Cisco IOS SD-WAN Software deliver Cisco's secure, cloud-scale SD-WAN solution for the branch
- Catalyst 8300 Series is purpose-built for high-performance and integrated SD-WAN Services along with the flexibility to deliver security and networking services together from the cloud or on-premises
- The Catalyst 8000 Series Edge Platforms have a wide variety of interface options to choose from
	- Ranging from lower and higher module density with backward compatibility to a variety of existing WAN, LAN and voice and compute modules
- Cisco 1000 Series ISRs are a small-form-factor platform that is best suited for small and midsize businesses, enterprise branches and as customer premises equipment in managed services environments
- The ISR 4000 Series consolidates many must-have IT functions, including network, security, compute, storage and unified communications
	- It integrates the Cisco UCS E-Series server along with connectivity options and 4G and readiness for 5G being everything needed in a branch in a single platform
#### Service Provider Routers
- Serves billions of devices with low-latency services and high bandwidth demand, scales with bandwidth demand
- Most of the Service Providers routers work on an IOS XR operating System, which is an operating system built by Cisco that is designed for high scalability and stability
	- Among this router category, we can find ASR and NCS series routers
- Cisco NCS 5500 Network Convergence System Series Routers are designed for mass scale Metro and WAN Aggregation
	- They come in multiple form factors depending on requirements, typically leveraging modular design to allow for efficient expansion and scaling when required
	- These routers support ports with up to 400GbE port density
- The ASR 9000 Series is an edge routing device capable of supporting the application performance required to power 5G service needs
- They are characterized by the top of the industry throughput and reliability, representing the state of the art for edge and core routing

### Virtual Routers
- Virtual routers are used for public, private or provider-hosted clouds
- Examples of Cisco Virtual Routers:
	- Catalyst 8000V Edge
	- Cloud Services Router 1000V
	- IOS XRv 9000
- Cisco CSR extends enterprise networks to public and private clouds
	- Offers routing, security and network management as cloud services with multi-tenancy
	- The series is infrastructure-agnostic and programmable across the LAN and WAN and in the cloud
- The Catalyst 8000V is a virtual-form factor router that delivers SD-WAN, WAN gateway and network services functions into virtual and cloud environments
	- This virtual router is a key element for enterprise network virtualization
		- Can be positioned in external data centers, provider-hosted clouds or internal company data centers

### Small Business Routers
- Includes several types of equipment including Cisco Meraki MX, Cisco 900 Series Integrated Services Routers and Cisco Small Business RV Series Routers
- The Cisco 900 Series ISRs combine internet access, comprehensive security and wireless services in a single high-performance device that is easy to deploy and manage
	- They are well suited for deployment at premises in enterprise small branch offices
	- Those routers are based on a Cisco IOS operating system
- The Cisco Meraki MX is 100% cloud-managed so installation and remote management are zero-touch, making it ideal for distributed branches
	- Provides multifunctional security and SD-WAN enterprise appliances with a wide set of capabilities to address multiple use cases
	- Organizations of all sizes and across all industries rely on the MX to deliver secure connectivity to hub locations or multi-cloud environments
- Cisco Small Business RV Series Routers are primarily bought for remote workers offering Virtual Private Networking (VPN) technology, connecting them to an Enterprise network through a secure internet pathway
	- Those routers are primarily managed and configured by using GUI

### Router Components #Routers
- Cisco offers many different routers which are suited for different networking environments such as enterprise LANs, service provider WANs
	- The various models offer various features that are suitable for an array of different environments
	- However, the core function of a router is to route packets, therefore all routers have many common components #Routers 
- These components are as follows:
	- CPU
		- Is the chip installed on the motherboard that carries out the instructions of a computer program
		- E.g. it processes all the information gathered from other routers or sent to other routers
	- Motherboard
		- The motherboard is the central circuit board, which holds critical electronic components of the system
		- The motherboard provides connections to other peripherals and interfaces
	- Memory:
		- There are 4 primary types of memory
			- RAM
				- Stores data during CPU processing
				- Volatile memory in that its information is lost when power is switched off
				- RAM provides temporary memory for the router's running configuration while the router is powered on
			- NVRAM
				- Retains content when the router is powered down
				- NVRAM stores the startup configuration file for most router platforms
				- It also contains the software configuration register, which determines while Cisco IOS image is used when booting the router
			- ROM
				- Is a Read-Only Memory on the motherboard
				- The content of ROM is not lost when power is switched off
				- Data stored in ROM cannot be modified or it can be modified slowly or with difficulty
				- ROM sometimes contains a ROM monitor (ROMMON)
					- ROM Monitor intializes the hardware and boots the Cisco IOS Software when you power on or reload a router
					- You can use the ROM monitor to perform certain configuration tasks, such as recovering a lost password or downloading software over the console port
				- ROM also includes bootloader software (bootstrap), which helps the router boot when it cannot find a valid Cisco IOS image in the flash memory
				- During normal startup, the ROM Monitor initializes the router and then control passes to the Cisco IOS Software
		- Ports (also known as interfaces)
			- Ports are used to connect to other devices in the network
			- Routers can have these types of ports:
				- Management ports
					- Routers have a console port that can be used to attach to a terminal used for management, configuration and control
					- High-end routers may also have a dedicated Ethernet port that can be used only for management
					- An IP address can be assigned to the Ethernet port and the router can be accessed from a management subnet
					- The auxiliary (AUX) interface on a router is used for remote management of the router
					- Typically, a modem is connected to the AUX interface for dial-in access
					- From a security standpoint, enabling the option to connect remotely to a network device carries with it the responsibility of vigilant device security
				- Network ports
					- The router has many network ports, including LAN or WAN media ports, which may be copper or fiber cable
					- IP addresses are assigned to network ports
![[Pasted image 20241031162006.png]]
> Example 

### Router Functions #Routers
- Routers have 2 important functions
	- Path determination
	- Packet forwarding
#### Path Determination
- Routers use their routing tables to determine how to forward packets
- Each router must maintain its own local routing table, which contains a list of all destinations known to the router and information about reaching those destinations
- When a router receives an incoming packet, it examines the destination IP address in the packet and searches for the best match between the destination address and the network addresses in the routing table
- A matching entry may indicate that the destination is directly connected to the router or that it can be reached via another router
- This router is called the next-hop router and is on the path to the final destination
- If there is no matching entry, the router sends the packet to the default route
	- If there is no default route, the router drops the packet

#### Packet Forwarding
- After a router determines the appropriate path for a packet, it forwards it through a network interface towards the destination network
- Routers can have interfaces of different types
- When forwarding a packet, routers perform encapsulation following the OSI Layer 2 protocol implemented at the exit interface #Encapsulation

![[Pasted image 20241103125007.png]]
> When router A receives an Ethernet frame, it de-encapsulates, examines and determines the exit interface
> 	- If the router needs to forward the packet out of the serial interface, the router will encapsulate the frame according to the Layer 2 protocol used on the serial link
> If an interface on the router has an IPv4 address within the destination network, the destination network is considered "directly connected" to the router
> 	- E.g. assume that router A receives a packet on Se0/0/0 destined for a host on network 10.1.1.0
> 		- Because the routing table indicates that network 10.1.1.0 is directly connected, router A forwards the packet out of its Fe0/1 interface and the switched on the segment processes the packet to the host
> If a destination network in the routing table is not directly connected, the packet must reach the destination network via the next-hop router
> 	- E.g. assume that router A receives a packet on Se0/0/0 interface and the destination host address is on the 10.1.3.0 network
> 		- In this case, it must forward the packet to the router B interface with the IPv4 address 10.1.2.2
### Routing Table #Routers
- Contains a list of all networks known to the router and information about reaching those networks
- Each line or entry of the routing table lists a destination network and the interface or next-hop address by which that destination network can be reached
- The router's goal when using the routing table is to find the appropriate exit interface out of which to send the traffic to reach a destination
- The interface can already be specified as part of the routing table 
	- But if its not, the router determines it by finding the interface through which the next-hop address for the destination network is reachable
- Routing table may receive different types of entries from multiple sources
	- These entries then populate the routing table based on a set of rules, which help the router determine the best path
- The 4 types of entries, depending on the source and role:
	- Directly connected networks
	- Dynamic routes
	- Static routes
	- Default routes

#### Directly Connected Networks
- All directly connected networks are added to the routing table automatically
- A newly deployed router, without any configured interfaces, has an empty routing table
	- The directly connected routes are added after you assign a valid IP address to the router interface, enable it with the **no shutdown** command and when it receives a carrier signal from another device (router, switch, end device)
		- In other words, when the interface status is up/up, the network of that interface is added to the routing table as a directly connected network
- If the hardware fails or is administratively shut down, the entry for that network is removed from the routing table
![[Pasted image 20241103141553.png]]
>An active, properly configured, directly connected interface, creates 2 routing table entries
>Command: **show ip route*

- The entries contain the following information:
	- Route source
		- Identifies how the route was learned
		- Directly connected interfaces have 2 route source codes
			- "C" identifies a directly connected network
			- "L" identifies the local IPv4 address assigned to the router's interface
	- Destination network
		- For directly connected networks, the destination networks are local to the router
		- The destination network address is indicated with a network address and subnet mask in the form of the prefix
			- "L" entries, which identifies the local IPv4 address of the interface, have a prefix of /32
	- Outgoing interface
		- Identifies the exit interface to use when forwarding packets to the destination network

#### Dynamic Routes
- Routers use dynamic routing protocols to share information about the reachability and status of remote networks
- A dynamic routing protocol allows routers to learn about remote networks from other routers automatically
	- These networks and the best path to each, are added to the router's routing table and identifies as a network learned by a specific dynamic routing protocol
- Cisco routers can support a variety of dynamic IPv4 and IPv6 routing protocols, such as Border Gateway Protocol (BGP), Open Shortest Path First (OSPF), Enhances Interior Gateway Routing Protocol (EIGRP), Intermediate System-to-Intermediate System (IS-IS), Routing Information Protocol (RIP) #OSPF #BGP #EIGRP #RIP
- The routing information is updated when changes in the network occur
- Larger networks require dynamic routing because there are usually many subnets and constant changes
- These changes require updates to routing tables across all routers in the network to prevent connectivity loss
- Dynamic routing protocols ensure that the routing table is automatically updated to reflect network changes
![[Pasted image 20241103142526.png]]
> In the example entry:
> 	- Route source
> 		- Identifies how the route was learned
> 			- "O" in the figure indicates that the source of the entry was the OSPF dynamic routing protocol
> 	- Destination network
> 		- Identifies the address of the remote network
> 			- The router knows how to reach 172.16.1.0/24 network
> 	- Administrative distance
> 		- Identifies the trustworthiness of the route source
> 			- Lower values indicate the preferred route source
> 				- OSPF has a default administrative distance value of 110
> 	- Metric
> 		- Identifies the value assigned to reach the remote network
> 		- Lower values indicate preferred routes
> 			- This OSPF route has a metric of for the destination network 172.16.1.0/24
> 	- Next-hop
> 		- Identifies the IPv4 address of the next router to forward the packet to
> 			- The IPv4 address of the next-hop is 192.168.10.2
> 	- Route time stamp
> 		- Identifies how much time has passed since the route was learned
> 			- The information in the example entry was learned 3 minutes and 23 seconds ago
> 	- Outgoing interface
> 		- Identifies the exit interface to use to forward a packet toward the final destination
> 			- The packets destined to the 172.16.1.0/24 network will be forwarded out of the GigabitEthernet 0/1 interface

#### Static Routes
- Static routes are entries that you manually enter directly into the configuration of the router
- Static routes are not automatically updated and must be manually reconfigured if the network topology changes
- Static routes can be effective for small, simple networks that do not change frequently
- The benefits of using static routes include improved security and resource efficiency
- The main disadvantage of using static routes is lack of automatic reconfiguration if network topology changes
- There are 2 common types of static routes in the routing table, static routes to a specific network and the default static route
![[Pasted image 20241103145821.png]]
> Route source
> 	- Identifies how the route was learned
> 		- Static routes have a route source code "S"
> Destination network
> 	- The destination network address is indicated with network address and subnet mask in the prefix
> 		- The router knows how to reach 192.168.30.0/24 network
> Administrative distance
> 	- Identifies the trustworthiness of the route source
> 	- Lower values indicate the preferred route source
> 		- Static routes have a default administrative value of 1
> Metric
> 	- Identifies the value assigned to reach the remote network
> 	- Static routes do not calculate metrics the same way as dynamic routes; metrics is set
> 		- The default value for the metric of a static route is 0
> Next-hop
> 	- Identifies the IPv4 address of the next router to forward the packet to
> 		- The IPv4 address of the next-hop is 192.168.10.2

#### Default Routes
- A default route is an optional entry used by the router if a packet does not match any other, a more specific route in the routing table
- A default route can be dynamically learned or statically configured
- More than one source provides the default route
	- But the selected default route is presented in the routing table as ___Gateway of last resort___
![[Pasted image 20241103150902.png]]
> Route source
> 	- Identifies how the route was learned 
> 	- The default route is marked with an asterisk ( * )
> 		- Depending on the source default route, an asterisk is added to the route source ( S* in the example )
> Destination network
> 	- The destination network for the default route is 0.0.0.0/0
> Administrative distance
> 	- Identifies the trustworthiness of the route source
> 	- Lower values indicate the preferred route source
> 	- The default route has the same administrative distance as a source of a default route
> 	- In the example, the default route's source is a static route, with a default administrative distance value of 1
> Metric
> 	- Identifies the value assigned to reach the remote network
> 	- The default route inherits the metric value from the route source 
> 		- In the example, since the default route is statically configured, the metric is 0
> Next-hop
> 	- Identifies the IPv4 address of the next router to forward the packet to
> 	- The IPv4 address of the next-hop for the default route in the example is 10.1.1.1

#### IPv4 Routing Table Example
- On a Cisco router, the **show ip route** command can be used to display the IPv4 routing table of a router
- The command output is used to verify that IPv4 networks and specific interface address have been installed in the IPv4 routing table
![[Pasted image 20241103153110.png]]
> The output shows that RouterA has received routes from multple sources (static routes and routing protocols), which would be uncommon in a production network
> 	- However, the table is used here to demonstrate the various route sources
> The first part of the output explains the codes, presenting the letters and the associated sources of the entries in the routing table

- The letters are:
	- C
		- Indicates directly connected networks, the first and seventh entries are directly connected networks
	- L
		- Indicates local interfaces within connected networks, the second and eighth entries are local
	- R
		- Indicates RIP, the third entry is the RIP route
	- O
		- Indicates OSPF, the fourth entry is an OSPF route
	- D
		- Indicates EIGRP, the fifth entry is an EIGRP route
		- The letter D stands for Diffusing Update Algorithm (DUAL), which is the update algorithm that EIGRP uses
		- The code letter E was previously taken by the legacy Exterior Gateway Protocol (EGP)
	- S
		- Indicates static routes, the sixth and ninth entries are static routes
	- Asterisk ( * ) 
		- Indicates that this static route is a candidate for the default route

### Path Determination #Routers
- Determining the best path involves evaluating multiple paths to the same destination network and selecting the optimum path to reach that network
- When you statically configure a route, then determine what the best path to the network is
	- But when dynamic routing protocol are used, the best path is selected by a routing protocol based on the quantitative value called a metric
- A metric is a quantitative value used to measure how to get to a given network
- A dynamic routing protocol's best path to a network is the path with the lowest metric
- Dynamic routing protocols typically use their own rules and metrics
	- The routing algorithm calculates a metric for each path to the destination network
- Metrics can be based on either a single characteristic, such as bandwidth or several characteristic of path, such bandwidth, delay and reliability
- Some routing protocols can base route selection on multiple metrics, combining them into a single metric
![[Pasted image 20241103155334.png]]
> Router R1 has multiple paths to LAN B network
> One possible path is R1 > R2 > R3
> 	- If router R1 runs a routing protocol that uses "hop count" as a metric, that protocol will count how many routers there are to the destination
> 	- R1 route would choose the path R1 > R3, because there is only one router on that path to the LAN B
> 		- An example of a protocol that uses hop count as a metric is RIP
> OSPF and EIGRP routing protocols do not count routers, but both to take into consideration the bandwidth of the links on the path to the destination
> 	- In the example above, when bandwidth is considered, then R1 > R2  > R3 path along 1-Gbps links is a better path than R1 > R3 with the bandwidth of 100Mbps
> Each dynamic protocol offers its best path (lowest metric route) to the routing table


#### Administrative Distance


### Cisco Router Models #Routers



### Routing Hierarchy on Internet #Routers


